import { useState, useMemo } from 'react';
import { Search, Filter, Crown, TrendingUp, Award, BarChart3, Lock } from 'lucide-react';
import { BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer } from 'recharts';
import { useFeatureAccess } from '../hooks/useFeatureAccess';
import FeatureGate from './FeatureGate';

interface ExamTopicsSectionProps {
  user?: any;
  hasClassViewerSession?: boolean;
  onUpgrade: () => void;
}

interface TopicData {
  konu: string;
  yillar: {
    [year: string]: number;
  };
}

interface SubjectData {
  konular: TopicData[];
  toplamSoru: {
    [year: string]: number;
  };
}


// Gerçek YKS verileri
const examData: { [key: string]: SubjectData } = {

  "TYT Turkce": { 
    "konular": [
      {"konu": "Ses Bilgisi", "yillar": {"2018": 3, "2019": 1, "2020": 0, "2021": 1, "2022": 0, "2023": 1, "2024": 0, "2025": 0}},
      {"konu": "Dil Bilgisi", "yillar": {"2018": 1, "2019": 8, "2020": 3, "2021": 2, "2022": 3, "2023": 2, "2024": 0, "2025": 0}},
      {"konu": "Noktalama İşaretleri", "yillar": {"2018": 1, "2019": 1, "2020": 2, "2021": 2, "2022": 2, "2023": 2, "2024": 2, "2025": 2}},
      {"konu": "Yazım Kuralları", "yillar": {"2018": 2, "2019": 2, "2020": 2, "2021": 2, "2022": 2, "2023": 2, "2024": 2, "2025": 2}},
      {"konu": "Anlatım Bozukluğu", "yillar": {"2018": 1, "2019": 0, "2020": 0, "2021": 0, "2022": 0, "2023": 0, "2024": 0, "2025": 0}},
      {"konu": "Paragraf", "yillar": {"2018": 22, "2019": 22, "2020": 26, "2021": 25, "2022": 26, "2023": 26, "2024": 26, "2025": 26}},
      {"konu": "Cümlede Anlam", "yillar": {"2018": 7, "2019": 3, "2020": 6, "2021": 3, "2022": 3, "2023": 4, "2024": 5, "2025": 5}},
      {"konu": "Sözcükte Anlam", "yillar": {"2018": 3, "2019": 3, "2020": 1, "2021": 5, "2022": 4, "2023": 3, "2024": 5, "2025": 5}}
    ],
    "toplamSoru": {"2018": 40, "2019": 40, "2020": 40, "2021": 40, "2022": 40, "2023": 40, "2024": 40, "2025": 40}
  },
  "TYT Matematik": {
    "konular": [
      {"konu": "Temel Kavramlar", "yillar": {"2018": 4, "2019": 4, "2020": 1, "2021": 3, "2022": 3, "2023": 2, "2024": 1, "2025": 2}},
      {"konu": "Sayı Basamakları", "yillar": {"2018": 2, "2019": 1, "2020": 1, "2021": 2, "2022": 1, "2023": 1, "2024": 2, "2025": 2}},
      {"konu": "Bölünebilme Kuralları", "yillar": {"2018": 0, "2019": 0, "2020": 1, "2021": 1, "2022": 1, "2023": 1, "2024": 1, "2025": 1}},
      {"konu": "OBEB-OKEK", "yillar": {"2018": 0, "2019": 0, "2020": 0, "2021": 0, "2022": 0, "2023": 0, "2024": 1, "2025": 1}},
      {"konu": "Rasyonel Sayılar", "yillar": {"2018": 1, "2019": 0, "2020": 3, "2021": 0, "2022": 2, "2023": 2, "2024": 2, "2025": 2}},
      {"konu": "Basit Eşitsizlikler", "yillar": {"2018": 1, "2019": 1, "2020": 1, "2021": 1, "2022": 1, "2023": 3, "2024": 0, "2025": 0}},
      {"konu": "Mutlak Değer", "yillar": {"2018": 1, "2019": 1, "2020": 1, "2021": 1, "2022": 1, "2023": 1, "2024": 2, "2025": 1}},
      {"konu": "Üslü Sayılar", "yillar": {"2018": 2, "2019": 0, "2020": 1, "2021": 1, "2022": 1, "2023": 1, "2024": 1, "2025": 1}},
      {"konu": "Köklü Sayılar", "yillar": {"2018": 2, "2019": 1, "2020": 1, "2021": 1, "2022": 1, "2023": 1, "2024": 1, "2025": 1}},
      {"konu": "Çarpanlara Ayırma", "yillar": {"2018": 1, "2019": 1, "2020": 0, "2021": 0, "2022": 0, "2023": 0, "2024": 0, "2025": 0}},
      {"konu": "Oran-Orantı", "yillar": {"2018": 0, "2019": 0, "2020": 0, "2021": 1, "2022": 1, "2023": 1, "2024": 0, "2025": 0}},
      {"konu": "Denklem Çözme", "yillar": {"2018": 1, "2019": 2, "2020": 1, "2021": 0, "2022": 2, "2023": 0, "2024": 1, "2025": 1}},
      {"konu": "Problemler", "yillar": {"2018": 11, "2019": 11, "2020": 12, "2021": 13, "2022": 11, "2023": 13, "2024": 10, "2025": 12}},
      {"konu": "Kümeler – Kartezyen Çarpım", "yillar": {"2018": 2, "2019": 2, "2020": 1, "2021": 1, "2022": 1, "2023": 1, "2024": 1, "2025": 1}},
      {"konu": "Mantık", "yillar": {"2018": 1, "2019": 0, "2020": 0, "2021": 1, "2022": 1, "2023": 1, "2024": 1, "2025": 1}},
      {"konu": "Fonksiyonlar", "yillar": {"2018": 1, "2019": 1, "2020": 2, "2021": 2, "2022": 1, "2023": 1, "2024": 1, "2025": 1}},
      {"konu": "Polinomlar", "yillar": {"2018": 0, "2019": 1, "2020": 0, "2021": 0, "2022": 1, "2023": 0, "2024": 0, "2025": 0}},
      {"konu": "Permütasyon-Kombinasyon", "yillar": {"2018": 1, "2019": 1, "2020": 1, "2021": 2, "2022": 0, "2023": 0, "2024": 1, "2025": 1}},
      {"konu": "Olasılık", "yillar": {"2018": 1, "2019": 2, "2020": 1, "2021": 1, "2022": 1, "2023": 1, "2024": 1, "2025": 1}},
      {"konu": "Veri – İstatistik", "yillar": {"2018": 0, "2019": 0, "2020": 1, "2021": 0, "2022": 1, "2023": 1, "2024": 1, "2025": 1}}
    ],
    "toplamSoru": {"2018": 29, "2019": 30, "2020": 30, "2021": 30, "2022": 30, "2023": 30, "2024": 30, "2025": 30}
  },
  "TYT Geometri": {
    "konular": [
      {"konu": "Açılar ve Üçgenler", "yillar": {"2018": 3, "2019": 2, "2020": 2, "2021": 4, "2022": 4, "2023": 5, "2024": 5, "2025": 5}},
      {"konu": "Çokgenler", "yillar": {"2018": 1, "2019": 1, "2020": 1, "2021": 1, "2022": 1, "2023": 1, "2024": 1, "2025": 1}},
      {"konu": "Yamuk", "yillar": {"2018": 1, "2019": 0, "2020": 2, "2021": 0, "2022": 0, "2023": 1, "2024": 1, "2025": 1}},
      {"konu": "Eşkenar Dörtgen", "yillar": {"2018": 0, "2019": 0, "2020": 0, "2021": 0, "2022": 1, "2023": 0, "2024": 0, "2025": 0}},
      {"konu": "Deltoid", "yillar": {"2018": 0, "2019": 0, "2020": 0, "2021": 1, "2022": 0, "2023": 0, "2024": 0, "2025": 0}},
      {"konu": "Kare", "yillar": {"2018": 1, "2019": 1, "2020": 1, "2021": 0, "2022": 0, "2023": 0, "2024": 0, "2025": 0}},
      {"konu": "Dikdörtgen", "yillar": {"2018": 1, "2019": 1, "2020": 2, "2021": 1, "2022": 1, "2023": 1, "2024": 1, "2025": 1}},
      {"konu": "Çember ve Daire", "yillar": {"2018": 1, "2019": 2, "2020": 0, "2021": 0, "2022": 0, "2023": 0, "2024": 0, "2025": 0}},
      {"konu": "Analitik Geometri", "yillar": {"2018": 1, "2019": 1, "2020": 0, "2021": 1, "2022": 1, "2023": 0, "2024": 0, "2025": 0}},
      {"konu": "Katı Cisimler", "yillar": {"2018": 2, "2019": 2, "2020": 2, "2021": 2, "2022": 2, "2023": 2, "2024": 2, "2025": 2}}
    ],
    "toplamSoru": {"2018": 11, "2019": 10, "2020": 10, "2021": 10, "2022": 10, "2023": 10, "2024": 10, "2025": 10}
  },
  "TYT Fizik": {
    "konular": [
      {"konu": "Fizik Bilimine Giriş", "yillar": {"2018": 1, "2019": 0, "2020": 1, "2021": 0, "2022": 0, "2023": 0, "2024": 0, "2025": 0}},
      {"konu": "Madde Ve Özellikleri", "yillar": {"2018": 0, "2019": 1, "2020": 0, "2021": 1, "2022": 1, "2023": 1, "2024": 1, "2025": 1}},
      {"konu": "Sıvıların Kaldırma Kuvveti", "yillar": {"2018": 1, "2019": 0, "2020": 1, "2021": 0, "2022": 0, "2023": 0, "2024": 1, "2025": 0}},
      {"konu": "Basınç", "yillar": {"2018": 0, "2019": 0, "2020": 0, "2021": 1, "2022": 1, "2023": 0, "2024": 0, "2025": 0}},
      {"konu": "Isı, Sıcaklık ve Genleşme", "yillar": {"2018": 1, "2019": 1, "2020": 1, "2021": 1, "2022": 1, "2023": 1, "2024": 1, "2025": 1}},
      {"konu": "Hareket ve Kuvvet", "yillar": {"2018": 1, "2019": 1, "2020": 1, "2021": 1, "2022": 1, "2023": 1, "2024": 1, "2025": 1}},
      {"konu": "Dinamik", "yillar": {"2018": 0, "2019": 0, "2020": 0, "2021": 0, "2022": 0, "2023": 0, "2024": 0, "2025": 0}},
      {"konu": "İş, Güç ve Enerji", "yillar": {"2018": 0, "2019": 1, "2020": 0, "2021": 0, "2022": 0, "2023": 0, "2024": 0, "2025": 0}},
      {"konu": "Elektrostatik", "yillar": {"2018": 0, "2019": 0, "2020": 0, "2021": 0, "2022": 0, "2023": 0, "2024": 0, "2025": 0}},
      {"konu": "Elektrik Akımı ve Devreler", "yillar": {"2018": 0, "2019": 1, "2020": 1, "2021": 0, "2022": 0, "2023": 2, "2024": 0, "2025": 1}},
      {"konu": "Elektriksel Enerji ve Güç", "yillar": {"2018": 0, "2019": 0, "2020": 0, "2021": 1, "2022": 1, "2023": 0, "2024": 0, "2025": 0}},
      {"konu": "Optik", "yillar": {"2018": 2, "2019": 2, "2020": 1, "2021": 1, "2022": 1, "2023": 2, "2024": 1, "2025": 1}},
      {"konu": "Manyetizma", "yillar": {"2018": 1, "2019": 0, "2020": 0, "2021": 0, "2022": 0, "2023": 0, "2024": 1, "2025": 1}},
      {"konu": "Dalgalar", "yillar": {"2018": 0, "2019": 0, "2020": 1, "2021": 1, "2022": 1, "2023": 0, "2024": 1, "2025": 1}}
    ],
    "toplamSoru": {"2018": 7, "2019": 7, "2020": 7, "2021": 7, "2022": 7, "2023": 7, "2024": 7, "2025": 7}
  },
  "TYT Kimya": {
    "konular": [
      {"konu": "Kimya Bilimi", "yillar": {"2018": 2, "2019": 0, "2020": 1, "2021": 1, "2022": 1, "2023": 1, "2024": 1, "2025": 0}},
      {"konu": "Atomun Yapısı", "yillar": {"2018": 0, "2019": 1, "2020": 1, "2021": 0, "2022": 0, "2023": 0, "2024": 1, "2025": 0}},
      {"konu": "Periyodik Tablo", "yillar": {"2018": 1, "2019": 1, "2020": 0, "2021": 1, "2022": 1, "2023": 1, "2024": 0, "2025": 0}},
      {"konu": "Maddenin Halleri", "yillar": {"2018": 1, "2019": 1, "2020": 1, "2021": 1, "2022": 1, "2023": 1, "2024": 1, "2025": 0}},
      {"konu": "Kimyasal Türler Arası Etkileşimler", "yillar": {"2018": 1, "2019": 1, "2020": 1, "2021": 1, "2022": 1, "2023": 1, "2024": 1, "2025": 0}},
      {"konu": "Kimyasal Hesaplamalar", "yillar": {"2018": 0, "2019": 0, "2020": 1, "2021": 1, "2022": 0, "2023": 0, "2024": 1, "2025": 0}},
      {"konu": "Kimyanın Temel Kanunları", "yillar": {"2018": 1, "2019": 0, "2020": 0, "2021": 0, "2022": 1, "2023": 1, "2024": 0, "2025": 0}},
      {"konu": "Asit, Baz ve Tuz", "yillar": {"2018": 0, "2019": 1, "2020": 1, "2021": 1, "2022": 1, "2023": 1, "2024": 1, "2025": 0}},
      {"konu": "Karışımlar", "yillar": {"2018": 0, "2019": 1, "2020": 1, "2021": 1, "2022": 1, "2023": 1, "2024": 1, "2025": 0}},
      {"konu": "Kimya Her Yerde", "yillar": {"2018": 1, "2019": 1, "2020": 0, "2021": 0, "2022": 0, "2023": 0, "2024": 0, "2025": 0}}
    ],
    "toplamSoru": {"2018": 7, "2019": 7, "2020": 7, "2021": 7, "2022": 7, "2023": 7, "2024": 7, "2025": 7}
  },
  "TYT Tarih": {
    "konular": [
      {"konu": "Tarih ve Zaman", "yillar": {"2018": 0, "2019": 0, "2020": 0, "2021": 0, "2022": 0, "2023": 0, "2024": 0, "2025": 0}},
      {"konu": "İlk ve Orta Çağlarda Türk Dünyası", "yillar": {"2018": 1, "2019": 1, "2020": 1, "2021": 1, "2022": 1, "2023": 1, "2024": 1, "2025": 1}},
      {"konu": "İslam Medeniyetinin Doğuşu", "yillar": {"2018": 0, "2019": 0, "2020": 0, "2021": 0, "2022": 0, "2023": 0, "2024": 0, "2025": 0}},
      {"konu": "Türklerin İslamiyet'i Kabulü ve İlk Türk İslam Devletleri", "yillar": {"2018": 1, "2019": 1, "2020": 1, "2021": 1, "2022": 1, "2023": 1, "2024": 1, "2025": 1}},
      {"konu": "Beylikten Devlete Osmanlı", "yillar": {"2018": 1, "2019": 1, "2020": 0, "2021": 0, "2022": 1, "2023": 0, "2024": 0, "2025": 0}},
      {"konu": "Dünya Gücü Osmanlı", "yillar": {"2018": 0, "2019": 0, "2020": 0, "2021": 0, "2022": 0, "2023": 0, "2024": 1, "2025": 1}},
      {"konu": "Değişim Çağında Avrupa ve Osmanlı", "yillar": {"2018": 0, "2019": 0, "2020": 0, "2021": 0, "2022": 0, "2023": 0, "2024": 0, "2025": 0}},
      {"konu": "Uluslararası İlişkilerde Denge Stratejisi (1774-1914)", "yillar": {"2018": 1, "2019": 0, "2020": 1, "2021": 1, "2022": 0, "2023": 1, "2024": 0, "2025": 0}},
      {"konu": "XX. Yüzyıl Başlarında Osmanlı Devleti ve Dünya", "yillar": {"2018": 1, "2019": 0, "2020": 1, "2021": 0, "2022": 0, "2023": 0, "2024": 0, "2025": 0}},
      {"konu": "Milli Mücadele", "yillar": {"2018": 0, "2019": 1, "2020": 1, "2021": 1, "2022": 1, "2023": 2, "2024": 1, "2025": 1}},
      {"konu": "Atatürkçülük ve Türk İnkılabı", "yillar": {"2018": 0, "2019": 1, "2020": 0, "2021": 1, "2022": 1, "2023": 0, "2024": 1, "2025": 1}}
    ],
    "toplamSoru": {"2018": 5, "2019": 5, "2020": 5, "2021": 5, "2022": 5, "2023": 5, "2024": 5, "2025": 5}
  },
  'TYT Biyoloji': {"konular":[{"konu":"Biyoloji ve Canlıların Ortak Özellikleri","yillar":{"2018":0,"2019":0,"2020":0,"2021":0,"2022":0,"2023":0,"2024":0,"2025":1}},{"konu":"Canlıların Yapısında Bulunan Temel Bileşikler","yillar":{"2018":0,"2019":1,"2020":1,"2021":1,"2022":1,"2023":1,"2024":1,"2025":0}},{"konu":"Hücre","yillar":{"2018":2,"2019":1,"2020":1,"2021":1,"2022":1,"2023":1,"2024":1,"2025":1}},{"konu":"Canlıların Çeşitliliği ve Sınıflandırılması","yillar":{"2018":0,"2019":0,"2020":1,"2021":1,"2022":0,"2023":0,"2024":1,"2025":0}},{"konu":"Canlı Âlemleri ve Özellikleri","yillar":{"2018":1,"2019":1,"2020":0,"2021":0,"2022":1,"2023":1,"2024":0,"2025":1}},{"konu":"Mitoz ve Eşeysiz Üreme","yillar":{"2018":1,"2019":1,"2020":0,"2021":0,"2022":0,"2023":1,"2024":1,"2025":1}},{"konu":"Mayoz ve Eşeyli Üreme","yillar":{"2018":0,"2019":0,"2020":1,"2021":1,"2022":1,"2023":0,"2024":0,"2025":0}},{"konu":"Kalıtım ve Biyolojik Çeşitlilik","yillar":{"2018":1,"2019":1,"2020":1,"2021":1,"2022":1,"2023":1,"2024":1,"2025":1}},{"konu":"Ekosistem Ekolojisi","yillar":{"2018":0,"2019":1,"2020":0,"2021":1,"2022":0,"2023":1,"2024":1,"2025":0}},{"konu":"Doğal Kaynaklar ve Biyolojik Çeşitliliğin Korunması","yillar":{"2018":0,"2019":0,"2020":1,"2021":0,"2022":1,"2023":0,"2024":0,"2025":1}}],"toplamSoru":{"2018":6,"2019":6,"2020":6,"2021":6,"2022":6,"2023":6,"2024":6,"2025":6}},
  'AYT Matematik': {"konular":[{"konu":"Temel Kavramlar","yillar":{"2018":3,"2019":5,"2020":7,"2021":3,"2022":4,"2023":6,"2024":3,"2025":6}},{"konu":"Önermeler ve Bileşik Önermeler, Niceleyiciler, Tanım, Aksiyom, Teorem ve İspat Yöntemleri","yillar":{"2018":2,"2019":1,"2020":0,"2021":1,"2022":1,"2023":1,"2024":1,"2025":1}},{"konu":"Kümelerde Temel Kavramlar, Kümelerde İşlemler","yillar":{"2018":0,"2019":2,"2020":2,"2021":1,"2022":1,"2023":1,"2024":1,"2025":1}},{"konu":"Fonksiyon Kavramı ve Gösterimi, İki Fonksiyonun Bileşkesi ve Bir Fonksiyonun Tersi","yillar":{"2018":1,"2019":1,"2020":2,"2021":0,"2022":1,"2023":2,"2024":0,"2025":1}},{"konu":"Fonksiyonlar ile İlgili Uygulamalar, Fonksiyon Dönüşümleri","yillar":{"2018":0,"2019":0,"2020":0,"2021":2,"2022":1,"2023":0,"2024":3,"2025":1}},{"konu":"İkinci Dereceden Fonksiyon ve Grafikleri","yillar":{"2018":1,"2019":2,"2020":1,"2021":0,"2022":0,"2023":1,"2024":1,"2025":0}},{"konu":"Polinom Kavramı ve Polinomlarda İşlemler, Polinomların Çapanlara Ayrılması","yillar":{"2018":1,"2019":2,"2020":2,"2021":1,"2022":1,"2023":3,"2024":0,"2025":1}},{"konu":"İkinci Dereceden Denklemler, Karmaşık Sayılar, Denklem ve Eşitsizlik Sistemleri","yillar":{"2018":2,"2019":0,"2020":1,"2021":3,"2022":2,"2023":3,"2024":3,"2025":1}},{"konu":"Permütasyon, Kombinasyon","yillar":{"2018":1,"2019":1,"2020":1,"2021":1,"2022":1,"2023":1,"2024":1,"2025":1}},{"konu":"Binom","yillar":{"2018":0,"2019":0,"2020":1,"2021":1,"2022":1,"2023":1,"2024":1,"2025":1}},{"konu":"Olasılık","yillar":{"2018":1,"2019":1,"2020":1,"2021":1,"2022":1,"2023":1,"2024":1,"2025":1}},{"konu":"Yönlü Açılar, Trigonometrik Fonksiyonlar","yillar":{"2018":1,"2019":3,"2020":3,"2021":1,"2022":2,"2023":1,"2024":2,"2025":2}},{"konu":"Kosinüs Teoremi, Sinüs Teoremi, Ters Trigonometrik Fonksiyonlar","yillar":{"2018":0,"2019":0,"2020":0,"2021":1,"2022":0,"2023":0,"2024":0,"2025":1}},{"konu":"Toplam-Fark ve İki Kat Açı Formüller","yillar":{"2018":1,"2019":0,"2020":1,"2021":2,"2022":2,"2023":3,"2024":1,"2025":2}},{"konu":"Trigonometrik Denklemler","yillar":{"2018":1,"2019":0,"2020":0,"2021":1,"2022":0,"2023":1,"2024":2,"2025":0}},{"konu":"Üstel Fonksiyon, Logaritma Fonksiyonu","yillar":{"2018":2,"2019":3,"2020":4,"2021":1,"2022":2,"2023":4,"2024":1,"2025":2}},{"konu":"Gerçek Sayı Dizileri","yillar":{"2018":1,"2019":1,"2020":2,"2021":1,"2022":1,"2023":2,"2024":1,"2025":1}},{"konu":"Limit ve Süreklilik","yillar":{"2018":2,"2019":2,"2020":0,"2021":2,"2022":2,"2023":0,"2024":2,"2025":2}},{"konu":"Anlık Değişim Oranı ve Türev, Türevin Uygulamaları","yillar":{"2018":3,"2019":4,"2020":0,"2021":4,"2022":4,"2023":0,"2024":3,"2025":3}},{"konu":"Belirsiz İntegral, Belirli İntegral ve Uygulamaları","yillar":{"2018":3,"2019":4,"2020":0,"2021":4,"2022":4,"2023":0,"2024":3,"2025":3}}],"toplamSoru":{"2018":26,"2019":32,"2020":28,"2021":31,"2022":31,"2023":31,"2024":30,"2025":31}},
  'AYT Edebiyat': {"konular":[{"konu":"Sözcükte Anlam","yillar":{"2018":1,"2019":1,"2020":1,"2021":0,"2022":1,"2023":1,"2024":1,"2025":1}},{"konu":"Cümlede Anlam","yillar":{"2018":1,"2019":1,"2020":1,"2021":1,"2022":1,"2023":1,"2024":1,"2025":1}},{"konu":"Paragrafta Anlam","yillar":{"2018":2,"2019":1,"2020":4,"2021":4,"2022":4,"2023":4,"2024":4,"2025":4}},{"konu":"Şiir Bilgisi","yillar":{"2018":2,"2019":3,"2020":2,"2021":2,"2022":2,"2023":2,"2024":1,"2025":3}},{"konu":"Söz Sanatları","yillar":{"2018":1,"2019":1,"2020":1,"2021":1,"2022":2,"2023":2,"2024":1,"2025":1}},{"konu":"Nesir Bilgisi","yillar":{"2018":2,"2019":3,"2020":1,"2021":2,"2022":1,"2023":2,"2024":1,"2025":2}},{"konu":"İslamiyet Öncesi Türk Edebiyatı / Geçiş Dönemi Türk Edebiyatı","yillar":{"2018":0,"2019":0,"2020":1,"2021":0,"2022":0,"2023":1,"2024":1,"2025":1}},{"konu":"Halk Edebiyatı","yillar":{"2018":0,"2019":0,"2020":1,"2021":1,"2022":0,"2023":2,"2024":2,"2025":0}},{"konu":"Divan Edebiyatı","yillar":{"2018":4,"2019":2,"2020":5,"2021":4,"2022":4,"2023":3,"2024":4,"2025":3}},{"konu":"Tanzimat Dönemi Türk Edebiyatı","yillar":{"2018":2,"2019":2,"2020":1,"2021":1,"2022":1,"2023":1,"2024":1,"2025":1}},{"konu":"Servet-i Fünun Dönemi Türk Edebiyatı / Fecr-i Ati Dönemi Türk Edebiyatı","yillar":{"2018":1,"2019":1,"2020":1,"2021":0,"2022":1,"2023":2,"2024":2,"2025":1}},{"konu":"Milli Edebiyat Dönemi Türk Edebiyatı","yillar":{"2018":1,"2019":0,"2020":1,"2021":1,"2022":1,"2023":0,"2024":0,"2025":1}},{"konu":"Cumhuriyet Dönemi Türk Edebiyatı","yillar":{"2018":5,"2019":5,"2020":2,"2021":3,"2022":3,"2023":2,"2024":3,"2025":2}},{"konu":"Geleneksel Türk Tiyatrosu","yillar":{"2018":0,"2019":1,"2020":0,"2021":1,"2022":1,"2023":0,"2024":0,"2025":1}},{"konu":"Masal/Fabl/Destan/Halk Hikayesi","yillar":{"2018":1,"2019":2,"2020":1,"2021":1,"2022":1,"2023":0,"2024":1,"2025":1}},{"konu":"Edebi Akımlar","yillar":{"2018":1,"2019":1,"2020":1,"2021":1,"2022":1,"2023":1,"2024":1,"2025":1}}],"toplamSoru":{"2018":24,"2019":24,"2020":24,"2021":24,"2022":24,"2023":24,"2024":24,"2025":24}},
  'AYT Geometri': {"konular":[{"konu":"Üçgen, Çokgen, Dörtgen, Özel Dörtgenler","yillar":{"2018":2,"2019":2,"2020":4,"2021":0,"2022":1,"2023":3,"2024":1,"2025":1}},{"konu":"Çember ve Daire","yillar":{"2018":0,"2019":1,"2020":2,"2021":3,"2022":2,"2023":2,"2024":2,"2025":2}},{"konu":"Doğrunun Analitik İncelenmesi","yillar":{"2018":2,"2019":1,"2020":2,"2021":3,"2022":2,"2023":2,"2024":3,"2025":2}},{"konu":"Çemberin Analitik İncelenmesi","yillar":{"2018":1,"2019":1,"2020":0,"2021":1,"2022":1,"2023":0,"2024":1,"2025":2}},{"konu":"Dönüşümler","yillar":{"2018":1,"2019":1,"2020":1,"2021":1,"2022":1,"2023":1,"2024":1,"2025":1}},{"konu":"Katı Cisimler","yillar":{"2018":1,"2019":1,"2020":1,"2021":1,"2022":2,"2023":1,"2024":1,"2025":1}}],"toplamSoru":{"2018":7,"2019":7,"2020":10,"2021":9,"2022":9,"2023":9,"2024":9,"2025":9}},
  'AYT Fizik': {"konular":[{"konu":"Vektörler","yillar":{"2018":0,"2019":0,"2020":0,"2021":0,"2022":0,"2023":1,"2024":0,"2025":0}},{"konu":"Bağıl Hareket","yillar":{"2018":0,"2019":1,"2020":1,"2021":0,"2022":0,"2023":0,"2024":1,"2025":0}},{"konu":"Newton'ın Hareket Yasaları","yillar":{"2018":1,"2019":0,"2020":2,"2021":0,"2022":2,"2023":1,"2024":0,"2025":1}},{"konu":"Bir Boyutta Sabit İvmeli Hareket","yillar":{"2018":1,"2019":0,"2020":0,"2021":0,"2022":0,"2023":1,"2024":1,"2025":1}},{"konu":"İki Boyutta Hareket","yillar":{"2018":0,"2019":1,"2020":1,"2021":2,"2022":0,"2023":0,"2024":0,"2025":1}},{"konu":"Enerji ve Hareket","yillar":{"2018":0,"2019":0,"2020":1,"2021":0,"2022":0,"2023":0,"2024":0,"2025":1}},{"konu":"İtme ve Çizgisel Momentum","yillar":{"2018":1,"2019":1,"2020":1,"2021":0,"2022":1,"2023":1,"2024":1,"2025":0}},{"konu":"Tork","yillar":{"2018":1,"2019":0,"2020":0,"2021":0,"2022":0,"2023":1,"2024":0,"2025":0}},{"konu":"Denge ve Denge Şartları","yillar":{"2018":0,"2019":1,"2020":0,"2021":1,"2022":0,"2023":0,"2024":0,"2025":0}},{"konu":"Basit Makineler","yillar":{"2018":0,"2019":0,"2020":0,"2021":0,"2022":1,"2023":0,"2024":1,"2025":0}},{"konu":"Elektriksel Kuvvet ve Elektrik Alan","yillar":{"2018":0,"2019":0,"2020":0,"2021":1,"2022":0,"2023":0,"2024":0,"2025":0}},{"konu":"Elektriksel Potansiyel","yillar":{"2018":0,"2019":1,"2020":0,"2021":1,"2022":0,"2023":0,"2024":1,"2025":1}},{"konu":"Düzgün Elektrik Alan ve Sığa","yillar":{"2018":1,"2019":0,"2020":1,"2021":0,"2022":0,"2023":1,"2024":0,"2025":0}},{"konu":"Manyetizma ve Elektromanyetik İndüklenme","yillar":{"2018":1,"2019":1,"2020":1,"2021":1,"2022":1,"2023":1,"2024":1,"2025":1}},{"konu":"Alternatif Akım","yillar":{"2018":0,"2019":1,"2020":1,"2021":0,"2022":0,"2023":1,"2024":1,"2025":1}},{"konu":"Transformatörler","yillar":{"2018":1,"2019":0,"2020":0,"2021":1,"2022":1,"2023":1,"2024":0,"2025":0}},{"konu":"Düzgün Çembersel Hareket","yillar":{"2018":1,"2019":1,"2020":2,"2021":1,"2022":1,"2023":1,"2024":1,"2025":1}},{"konu":"Dönerek Öteleme Hareketi","yillar":{"2018":0,"2019":0,"2020":1,"2021":0,"2022":0,"2023":1,"2024":0,"2025":0}},{"konu":"Açısal Momentum","yillar":{"2018":0,"2019":1,"2020":0,"2021":0,"2022":0,"2023":0,"2024":0,"2025":0}},{"konu":"Kütle Çekim Kuvveti","yillar":{"2018":1,"2019":0,"2020":0,"2021":1,"2022":0,"2023":0,"2024":1,"2025":0}},{"konu":"Kepler Kanunları","yillar":{"2018":0,"2019":0,"2020":0,"2021":0,"2022":1,"2023":1,"2024":0,"2025":1}},{"konu":"Basit Harmonik Hareket","yillar":{"2018":1,"2019":1,"2020":1,"2021":1,"2022":1,"2023":1,"2024":1,"2025":1}},{"konu":"Dalgalarda Kırınım, Girişim ve Doppler Olayı","yillar":{"2018":0,"2019":0,"2020":1,"2021":1,"2022":1,"2023":1,"2024":1,"2025":1}},{"konu":"Elektromanyetik Dalgalar","yillar":{"2018":2,"2019":1,"2020":0,"2021":0,"2022":0,"2023":0,"2024":0,"2025":1}},{"konu":"Büyük Patlama ve Evrenin Oluşumu","yillar":{"2018":0,"2019":0,"2020":0,"2021":0,"2022":1,"2023":0,"2024":0,"2025":1}},{"konu":"Radyoaktivite","yillar":{"2018":1,"2019":1,"2020":0,"2021":1,"2022":0,"2023":0,"2024":1,"2025":0}},{"konu":"Özel Görelilik","yillar":{"2018":0,"2019":0,"2020":0,"2021":0,"2022":1,"2023":0,"2024":0,"2025":0}},{"konu":"Fotoelektrik Olayı","yillar":{"2018":1,"2019":1,"2020":0,"2021":1,"2022":0,"2023":0,"2024":1,"2025":0}},{"konu":"Compton Saçılması ve De Broglie Dalga Boyu","yillar":{"2018":0,"2019":0,"2020":0,"2021":0,"2022":1,"2023":0,"2024":0,"2025":0}},{"konu":"Görüntüleme Teknolojileri","yillar":{"2018":0,"2019":1,"2020":0,"2021":0,"2022":1,"2023":0,"2024":0,"2025":1}},{"konu":"Süper İletkenler","yillar":{"2018":0,"2019":0,"2020":0,"2021":0,"2022":0,"2023":0,"2024":1,"2025":0}},{"konu":"Laser Işınları","yillar":{"2018":0,"2019":0,"2020":0,"2021":1,"2022":0,"2023":0,"2024":0,"2025":0}}],"toplamSoru":{"2018":14,"2019":14,"2020":14,"2021":14,"2022":14,"2023":14,"2024":14,"2025":14}},
  'AYT Kimya': {"konular":[{"konu":"Atomun Kuantum Modeli","yillar":{"2018":0,"2019":1,"2020":2,"2021":0,"2022":1,"2023":1,"2024":1,"2025":1}},{"konu":"Periyodik Özellikler","yillar":{"2018":1,"2019":0,"2020":0,"2021":0,"2022":0,"2023":0,"2024":0,"2025":0}},{"konu":"Yükseltgenme Basamakları","yillar":{"2018":0,"2019":0,"2020":0,"2021":1,"2022":0,"2023":0,"2024":0,"2025":0}},{"konu":"Gazların Özellikleri ve Gaz Yasaları","yillar":{"2018":0,"2019":0,"2020":0,"2021":1,"2022":0,"2023":0,"2024":0,"2025":1}},{"konu":"İdeal Gaz Yasası","yillar":{"2018":0,"2019":0,"2020":0,"2021":0,"2022":1,"2023":1,"2024":0,"2025":0}},{"konu":"Gazlarda Kinetik Teori","yillar":{"2018":1,"2019":1,"2020":0,"2021":0,"2022":0,"2023":1,"2024":1,"2025":0}},{"konu":"Gaz Karışımları","yillar":{"2018":0,"2019":1,"2020":1,"2021":0,"2022":0,"2023":0,"2024":0,"2025":0}},{"konu":"Derişim Birimleri","yillar":{"2018":1,"2019":0,"2020":1,"2021":1,"2022":1,"2023":2,"2024":1,"2025":1}},{"konu":"Koligatif Özellikler","yillar":{"2018":0,"2019":1,"2020":1,"2021":0,"2022":1,"2023":0,"2024":1,"2025":0}},{"konu":"Çözünürlük","yillar":{"2018":0,"2019":0,"2020":0,"2021":1,"2022":0,"2023":0,"2024":0,"2025":0}},{"konu":"Tepkimelerde Isı Değişimi","yillar":{"2018":0,"2019":0,"2020":0,"2021":0,"2022":0,"2023":1,"2024":0,"2025":0}},{"konu":"Oluşum Entalpisi","yillar":{"2018":0,"2019":1,"2020":0,"2021":0,"2022":0,"2023":0,"2024":0,"2025":1}},{"konu":"Tepkime Isılarının Toplanabilirliği","yillar":{"2018":0,"2019":0,"2020":1,"2021":1,"2022":1,"2023":0,"2024":1,"2025":0}},{"konu":"Tepkime Hızları","yillar":{"2018":0,"2019":1,"2020":1,"2021":0,"2022":1,"2023":0,"2024":1,"2025":0}},{"konu":"Tepkime Hızını Etkileyen Faktörler","yillar":{"2018":1,"2019":0,"2020":0,"2021":1,"2022":0,"2023":1,"2024":0,"2025":1}},{"konu":"Kimyasal Denge","yillar":{"2018":0,"2019":0,"2020":0,"2021":0,"2022":1,"2023":0,"2024":1,"2025":0}},{"konu":"Dengeyi Etkileyen Faktörler","yillar":{"2018":0,"2019":0,"2020":1,"2021":1,"2022":0,"2023":1,"2024":0,"2025":1}},{"konu":"Sulu Çözelti Dengeleri","yillar":{"2018":1,"2019":2,"2020":1,"2021":1,"2022":1,"2023":1,"2024":1,"2025":1}},{"konu":"İndirgenme – Yükseltgenme Tepkimelerinde Elektrik Akımı","yillar":{"2018":0,"2019":0,"2020":1,"2021":0,"2022":0,"2023":0,"2024":0,"2025":0}},{"konu":"Elektrotlar ve Elektrokimyasal Hücreler","yillar":{"2018":1,"2019":0,"2020":1,"2021":1,"2022":1,"2023":0,"2024":0,"2025":0}},{"konu":"Elektrot Potansiyelleri","yillar":{"2018":1,"2019":0,"2020":1,"2021":0,"2022":1,"2023":2,"2024":1,"2025":1}},{"konu":"Elektroliz","yillar":{"2018":0,"2019":1,"2020":0,"2021":1,"2022":0,"2023":1,"2024":1,"2025":1}},{"konu":"Korozyon","yillar":{"2018":0,"2019":1,"2020":0,"2021":0,"2022":0,"2023":0,"2024":0,"2025":0}},{"konu":"Basit Formül ve Molekül Formülü","yillar":{"2018":0,"2019":0,"2020":0,"2021":0,"2022":1,"2023":0,"2024":0,"2025":0}},{"konu":"Doğada Karbon","yillar":{"2018":0,"2019":1,"2020":0,"2021":0,"2022":0,"2023":1,"2024":0,"2025":0}},{"konu":"Hibritleşme – Molekül Geometrisi","yillar":{"2018":0,"2019":0,"2020":1,"2021":1,"2022":0,"2023":0,"2024":1,"2025":2}},{"konu":"Hidrokarbonlar","yillar":{"2018":1,"2019":2,"2020":0,"2021":1,"2022":0,"2023":0,"2024":1,"2025":1}},{"konu":"Fonksiyonel Gruplar","yillar":{"2018":1,"2019":0,"2020":0,"2021":0,"2022":0,"2023":0,"2024":0,"2025":0}},{"konu":"Alkoller – Eterler","yillar":{"2018":0,"2019":0,"2020":0,"2021":1,"2022":0,"2023":0,"2024":0,"2025":1}},{"konu":"Karbonil Bileşikleri","yillar":{"2018":0,"2019":0,"2020":0,"2021":0,"2022":1,"2023":0,"2024":0,"2025":0}},{"konu":"Karboksilik Asitler","yillar":{"2018":0,"2019":0,"2020":0,"2021":0,"2022":0,"2023":0,"2024":1,"2025":0}},{"konu":"Esterler","yillar":{"2018":0,"2019":0,"2020":0,"2021":0,"2022":1,"2023":0,"2024":0,"2025":0}}],"toplamSoru":{"2018":13,"2019":13,"2020":13,"2021":13,"2022":13,"2023":13,"2024":13,"2025":13}},
  'AYT Biyoloji': {"konular":[{"konu":"Denetleyici ve Düzenleyici Sistem, Duyu Organları","yillar":{"2018":2,"2019":1,"2020":2,"2021":1,"2022":1,"2023":3,"2024":1,"2025":1}},{"konu":"Destek ve Hareket Sistemi","yillar":{"2018":1,"2019":0,"2020":0,"2021":1,"2022":1,"2023":0,"2024":0,"2025":0}},{"konu":"Sindirim Sistemi","yillar":{"2018":0,"2019":1,"2020":1,"2021":0,"2022":0,"2023":1,"2024":1,"2025":1}},{"konu":"Dolaşım Sistemleri","yillar":{"2018":1,"2019":1,"2020":1,"2021":1,"2022":1,"2023":1,"2024":1,"2025":1}},{"konu":"Solunum Sistemi","yillar":{"2018":0,"2019":1,"2020":1,"2021":1,"2022":1,"2023":1,"2024":1,"2025":0}},{"konu":"Üriner Sistem","yillar":{"2018":0,"2019":1,"2020":1,"2021":0,"2022":0,"2023":1,"2024":1,"2025":1}},{"konu":"Üreme Sistemi ve Embriyonik Gelişim","yillar":{"2018":0,"2019":0,"2020":0,"2021":0,"2022":1,"2023":0,"2024":0,"2025":1}},{"konu":"Komünite Ekolojisi","yillar":{"2018":1,"2019":0,"2020":1,"2021":1,"2022":1,"2023":1,"2024":1,"2025":1}},{"konu":"Popülasyon Ekolojisi","yillar":{"2018":0,"2019":0,"2020":1,"2021":1,"2022":1,"2023":1,"2024":1,"2025":0}},{"konu":"Nükleik Asitlerin Keşfi ve Önemi","yillar":{"2018":1,"2019":1,"2020":1,"2021":1,"2022":1,"2023":1,"2024":1,"2025":1}},{"konu":"Genetik Şifre ve Protein Sentezi","yillar":{"2018":1,"2019":1,"2020":2,"2021":1,"2022":1,"2023":1,"2024":1,"2025":1}},{"konu":"Canlılık ve Enerji","yillar":{"2018":0,"2019":0,"2020":0,"2021":0,"2022":0,"2023":0,"2024":1,"2025":0}},{"konu":"Fotosentez","yillar":{"2018":1,"2019":1,"2020":1,"2021":1,"2022":0,"2023":1,"2024":0,"2025":1}},{"konu":"Kemosentez","yillar":{"2018":0,"2019":0,"2020":0,"2021":0,"2022":1,"2023":0,"2024":0,"2025":0}},{"konu":"Hücresel Solunum","yillar":{"2018":1,"2019":1,"2020":1,"2021":1,"2022":1,"2023":1,"2024":1,"2025":1}},{"konu":"Bitkilerin Yapısı","yillar":{"2018":1,"2019":1,"2020":0,"2021":0,"2022":1,"2023":0,"2024":1,"2025":0}},{"konu":"Bitkilerde Madde Taşınması","yillar":{"2018":0,"2019":1,"2020":0,"2021":1,"2022":1,"2023":0,"2024":1,"2025":1}},{"konu":"Bitkilerde Eşeyli Üreme","yillar":{"2018":1,"2019":1,"2020":0,"2021":1,"2022":0,"2023":0,"2024":0,"2025":1}},{"konu":"Canlılar ve Çevre","yillar":{"2018":1,"2019":1,"2020":0,"2021":1,"2022":0,"2023":0,"2024":0,"2025":1}}],"toplamSoru":{"2018":13,"2019":13,"2020":13,"2021":13,"2022":13,"2023":13,"2024":13,"2025":13}},
  'AYT Tarih 1': {"konular":[{"konu":"İnsanlığın Hafızası Tarih","yillar":{"2018":1,"2019":0,"2020":0,"2021":0,"2022":0,"2023":0,"2024":0,"2025":0}},{"konu":"İlk Çağ'da Başlıca Medeniyet Havzaları","yillar":{"2018":0,"2019":1,"2020":1,"2021":1,"2022":1,"2023":1,"2024":0,"2025":1}},{"konu":"Kanunlar Doğuyor","yillar":{"2018":0,"2019":0,"2020":0,"2021":0,"2022":0,"2023":0,"2024":1,"2025":0}},{"konu":"Coğrafya ile Oluşan Yaşam Tarzı","yillar":{"2018":0,"2019":0,"2020":0,"2021":0,"2022":1,"2023":0,"2024":0,"2025":0}},{"konu":"Boylardan Devlete","yillar":{"2018":1,"2019":1,"2020":1,"2021":1,"2022":0,"2023":1,"2024":1,"2025":1}},{"konu":"İslamiyet Yayılıyor","yillar":{"2018":1,"2019":1,"2020":1,"2021":1,"2022":0,"2023":1,"2024":1,"2025":1}},{"konu":"Abbasi Devleti ve Türkler","yillar":{"2018":0,"2019":0,"2020":0,"2021":1,"2022":1,"2023":1,"2024":0,"2025":0}},{"konu":"İslamiyet'in Türk Devlet ve Toplum Yapısına Etkisi","yillar":{"2018":1,"2019":0,"2020":0,"2021":0,"2022":0,"2023":0,"2024":0,"2025":0}},{"konu":"Büyük Selçuklu Devleti (1040- 1157)","yillar":{"2018":0,"2019":0,"2020":1,"2021":0,"2022":0,"2023":0,"2024":0,"2025":0}},{"konu":"Büyük Selçuklu Devleti'nde Yönetim ve Toplum Yapısı","yillar":{"2018":0,"2019":0,"2020":0,"2021":0,"2022":0,"2023":0,"2024":1,"2025":0}},{"konu":"Anadolu'nun İlk Türk Siyasi Teşekkülleri","yillar":{"2018":0,"2019":0,"2020":0,"2021":0,"2022":1,"2023":0,"2024":0,"2025":1}},{"konu":"Hilal ve Haç Mücadelesi","yillar":{"2018":0,"2019":1,"2020":0,"2021":0,"2022":0,"2023":0,"2024":0,"2025":0}},{"konu":"Devletleşme Sürecinde Osmanlı-Bizans İlişkileri","yillar":{"2018":0,"2019":0,"2020":0,"2021":0,"2022":0,"2023":0,"2024":1,"2025":1}},{"konu":"Osmanlı Devleti'nin Rumeli'deki İskân ve İstimâlet Politikası","yillar":{"2018":0,"2019":0,"2020":1,"2021":0,"2022":1,"2023":0,"2024":0,"2025":0}},{"konu":"Osmanlı Devleti'nde Tımar Sistemi","yillar":{"2018":1,"2019":0,"2020":0,"2021":0,"2022":0,"2023":0,"2024":0,"2025":0}},{"konu":"Devşirme Sistemi ve Yeniçeri Ocağı","yillar":{"2018":0,"2019":1,"2020":0,"2021":0,"2022":0,"2023":0,"2024":0,"2025":0}},{"konu":"İstanbul'un Fethi ve Fethin Sonuçları","yillar":{"2018":1,"2019":0,"2020":0,"2021":0,"2022":0,"2023":1,"2024":0,"2025":0}},{"konu":"Tek Hanedan Anlayışı ve Gelenekler Işığında Devlet İdarecisi","yillar":{"2018":0,"2019":0,"2020":0,"2021":0,"2022":1,"2023":0,"2024":0,"2025":0}},{"konu":"Osmanlı Devleti'nde İsyanlar ve Düzeni Koruma Çabaları","yillar":{"2018":0,"2019":0,"2020":0,"2021":1,"2022":0,"2023":0,"2024":0,"2025":0}},{"konu":"Osmanlı Devleti'nde Modern Orduya Geçiş","yillar":{"2018":0,"2019":0,"2020":0,"2021":0,"2022":0,"2023":0,"2024":1,"2025":0}},{"konu":"Osmanlı Devleti'ne Yönelik Tehditler","yillar":{"2018":0,"2019":0,"2020":0,"2021":1,"2022":0,"2023":0,"2024":0,"2025":0}},{"konu":"Osmanlı Devleti'nde Demokratikleşme Hareketleri","yillar":{"2018":0,"2019":0,"2020":0,"2021":0,"2022":0,"2023":1,"2024":0,"2025":1}},{"konu":"Osmanlı Devleti'nde Sanayileşme Çabaları","yillar":{"2018":0,"2019":1,"2020":1,"2021":0,"2022":0,"2023":0,"2024":0,"2025":0}},{"konu":"Mustafa Kemal'in Lider Olarak Yetişmesinde Etkili Koşullar","yillar":{"2018":1,"2019":0,"2020":0,"2021":0,"2022":0,"2023":0,"2024":0,"2025":0}},{"konu":"I. Dünya Savaşı Sürecinde Osmanlı Devleti","yillar":{"2018":0,"2019":1,"2020":1,"2021":0,"2022":0,"2023":1,"2024":1,"2025":1}},{"konu":"I. Dünya Savaşı'nın Sonuçları","yillar":{"2018":0,"2019":0,"2020":0,"2021":1,"2022":0,"2023":0,"2024":0,"2025":0}},{"konu":"Millî Mücadele'ye Hazırlık Dönemi","yillar":{"2018":1,"2019":0,"2020":1,"2021":1,"2022":2,"2023":1,"2024":1,"2025":1}},{"konu":"Doğu ve Güney Cepheleri ile Bu Cephelerde Öne Çıkan Şahsiyetler","yillar":{"2018":0,"2019":1,"2020":1,"2021":0,"2022":0,"2023":0,"2024":0,"2025":0}},{"konu":"Batı Cephesi ve Bu Cephede Öne Çıkan Şahsiyetler","yillar":{"2018":1,"2019":1,"2020":0,"2021":1,"2022":1,"2023":1,"2024":1,"2025":1}},{"konu":"Millî Mücadele'nin Sona Ermesi ve Lozan Barış Antlaşması","yillar":{"2018":0,"2019":0,"2020":0,"2021":0,"2022":0,"2023":1,"2024":0,"2025":0}},{"konu":"Atatürk İlkeleri","yillar":{"2018":1,"2019":1,"2020":0,"2021":0,"2022":0,"2023":0,"2024":0,"2025":0}},{"konu":"Siyasi Alandaki Gelişmeler","yillar":{"2018":0,"2019":0,"2020":1,"2021":1,"2022":0,"2023":0,"2024":0,"2025":0}},{"konu":"Toplumsal Alandaki İnkılaplar","yillar":{"2018":0,"2019":0,"2020":0,"2021":0,"2022":0,"2023":0,"2024":1,"2025":0}},{"konu":"Atatürk Dönemi Türk Dış Politikası","yillar":{"2018":0,"2019":0,"2020":0,"2021":0,"2022":0,"2023":0,"2024":0,"2025":1}},{"konu":"II. Dünya Savaşı Sürecinde Türkiye","yillar":{"2018":0,"2019":0,"2020":0,"2021":0,"2022":1,"2023":0,"2024":0,"2025":0}}],"toplamSoru":{"2018":10,"2019":10,"2020":10,"2021":10,"2022":10,"2023":10,"2024":10,"2025":10}},
  'AYT Coğrafya 1': {"konular":[{"konu":"Ekosistemlerin Özellikleri ve İşleyişi","yillar":{"2018":0,"2019":0,"2020":1,"2021":0,"2022":0,"2023":1,"2024":0,"2025":1}},{"konu":"Ekstrem Doğa Olayları","yillar":{"2018":1,"2019":1,"2020":0,"2021":1,"2022":1,"2023":1,"2024":0,"2025":0}},{"konu":"Küresel İklim Değişikliği ve Doğa Olaylarının Geleceği","yillar":{"2018":0,"2019":0,"2020":0,"2021":0,"2022":1,"2023":0,"2024":0,"2025":0}},{"konu":"Nüfus Politikaları ve Projeksiyonları","yillar":{"2018":0,"2019":0,"2020":1,"2021":0,"2022":0,"2023":0,"2024":1,"2025":0}},{"konu":"Şehirler ve Kırsal Yerleşmeler","yillar":{"2018":0,"2019":0,"2020":1,"2021":1,"2022":1,"2023":1,"2024":0,"2025":1}},{"konu":"Dünyada Doğal Kaynak ve Ekonomi","yillar":{"2018":0,"2019":1,"2020":0,"2021":0,"2022":0,"2023":0,"2024":0,"2025":0}},{"konu":"Türkiye'de Tarım, Sanayi, Maden ve Enerji Kaynakları","yillar":{"2018":1,"2019":1,"2020":0,"2021":0,"2022":0,"2023":1,"2024":0,"2025":1}},{"konu":"Ekonomi, Şehirleşme ve Göç","yillar":{"2018":1,"2019":1,"2020":0,"2021":0,"2022":0,"2023":0,"2024":1,"2025":0}},{"konu":"İşlevsel Bölge ve Kalkınma Projeleri","yillar":{"2018":0,"2019":0,"2020":1,"2021":0,"2022":0,"2023":0,"2024":0,"2025":0}},{"konu":"Hizmet Sektörünün Ekonomideki Yeri ve Ulaşım","yillar":{"2018":0,"2019":0,"2020":0,"2021":0,"2022":1,"2023":0,"2024":0,"2025":0}},{"konu":"Türkiye'de ve Dünyada Ticaret","yillar":{"2018":1,"2019":0,"2020":0,"2021":0,"2022":0,"2023":0,"2024":0,"2025":0}},{"konu":"Türkiye'de Turizm","yillar":{"2018":1,"2019":0,"2020":0,"2021":1,"2022":0,"2023":0,"2024":0,"2025":1}},{"konu":"Kültür Bölgeleri ve Türk Kültürü","yillar":{"2018":0,"2019":0,"2020":0,"2021":0,"2022":1,"2023":0,"2024":1,"2025":1}},{"konu":"Küreselleşen Dünya","yillar":{"2018":0,"2019":0,"2020":0,"2021":1,"2022":0,"2023":0,"2024":0,"2025":0}},{"konu":"Uluslararası Örgütler","yillar":{"2018":0,"2019":1,"2020":1,"2021":0,"2022":0,"2023":1,"2024":0,"2025":0}},{"konu":"Ülkeler Arası Etkileşim","yillar":{"2018":0,"2019":0,"2020":0,"2021":1,"2022":1,"2023":0,"2024":0,"2025":0}},{"konu":"Jeopolitik Konum","yillar":{"2018":0,"2019":0,"2020":0,"2021":0,"2022":0,"2023":0,"2024":0,"2025":1}},{"konu":"Çevre Sorunları ve Geri Dönüşüm","yillar":{"2018":1,"2019":1,"2020":1,"2021":1,"2022":0,"2023":1,"2024":2,"2025":0}},{"konu":"Çevre Sorunlarının Çözümüne Yönelik Yaklaşımlar","yillar":{"2018":0,"2019":0,"2020":0,"2021":0,"2022":0,"2023":0,"2024":1,"2025":0}}],"toplamSoru":{"2018":6,"2019":6,"2020":6,"2021":6,"2022":6,"2023":6,"2024":6,"2025":6}},
  'AYT Felsefe': {"konular":[{"konu":"Felsefi Düşüncenin Ortaya Çıkışı ve Özellikleri","yillar":{"2018":0,"2019":1,"2020":0,"2021":0,"2022":2,"2023":1,"2024":1,"2025":1}},{"konu":"Düşünme ve Dil İlişkisi","yillar":{"2018":0,"2019":0,"2020":0,"2021":0,"2022":0,"2023":0,"2024":1,"2025":0}},{"konu":"Bilgi Felsefesinin Konusu ve Bilginin İmkânı Problemi","yillar":{"2018":0,"2019":0,"2020":0,"2021":1,"2022":0,"2023":0,"2024":0,"2025":0}},{"konu":"Bilginin Sınırları, Ölçütü- Doğruluk ve Gerçeklik Bilginin Değeri ve Güvenirliği","yillar":{"2018":0,"2019":1,"2020":0,"2021":0,"2022":1,"2023":0,"2024":1,"2025":0}},{"konu":"Bilimin Değeri-Bilim Felsefe İlişkisi-Bilim ve Hayat İlişkisi","yillar":{"2018":1,"2019":0,"2020":0,"2021":0,"2022":0,"2023":0,"2024":0,"2025":0}},{"konu":"Ahlak Felsefesinin Konusu ve Temel Kavramları","yillar":{"2018":1,"2019":0,"2020":0,"2021":0,"2022":0,"2023":0,"2024":0,"2025":0}},{"konu":"Ahlak Felsefesinde Özgürlük ve Sorumluluk","yillar":{"2018":0,"2019":0,"2020":0,"2021":1,"2022":0,"2023":0,"2024":0,"2025":0}},{"konu":"Ahlak Felsefesinde İyilik ve Mutluluk İlişkisi","yillar":{"2018":0,"2019":0,"2020":1,"2021":0,"2022":0,"2023":0,"2024":0,"2025":0}},{"konu":"Din Felsefesinin Konusu ve Soruları","yillar":{"2018":0,"2019":0,"2020":0,"2021":0,"2022":0,"2023":0,"2024":1,"2025":0}},{"konu":"Siyaset Felsefesinin Konusu ve Problemleri","yillar":{"2018":0,"2019":1,"2020":0,"2021":0,"2022":0,"2023":0,"2024":0,"2025":0}},{"konu":"Sanat Felsefesinin Konusu ve Problemleri","yillar":{"2018":1,"2019":1,"2020":0,"2021":0,"2022":0,"2023":0,"2024":1,"2025":1}},{"konu":"Felsefi Metin Analizi","yillar":{"2018":0,"2019":0,"2020":0,"2021":0,"2022":0,"2023":1,"2024":0,"2025":0}},{"konu":"Sofistler ile Sokrates'in Bilgi ve Değer Anlayışları","yillar":{"2018":0,"2019":0,"2020":1,"2021":1,"2022":0,"2023":0,"2024":0,"2025":1}},{"konu":"Platon ve Aristoteles'in Varlık, Bilgi ve Değer Anlayışı","yillar":{"2018":0,"2019":0,"2020":1,"2021":0,"2022":0,"2023":1,"2024":0,"2025":0}},{"konu":"İslam Felsefesinin Özellikleri, İnanç Akıl İlişkisi ve Filozofların Görüşleri","yillar":{"2018":0,"2019":1,"2020":0,"2021":0,"2022":0,"2023":0,"2024":0,"2025":0}},{"konu":"15-17. Yüzyıl Felsefesinde Öne Çıkan Görüşler","yillar":{"2018":0,"2019":0,"2020":1,"2021":1,"2022":1,"2023":0,"2024":0,"2025":1}},{"konu":"18-19. Yüzyıl Felsefesinde Öne Çıkan Problemler ve Görüşler","yillar":{"2018":1,"2019":0,"2020":0,"2021":0,"2022":0,"2023":0,"2024":0,"2025":0}},{"konu":"20. Yüzyıl Felsefesinde Bazı Ana Akımlar","yillar":{"2018":1,"2019":0,"2020":2,"2021":2,"2022":1,"2023":1,"2024":0,"2025":0}},{"konu":"20. Yüzyıl Filozoflarının Görüşleri","yillar":{"2018":0,"2019":0,"2020":0,"2021":0,"2022":0,"2023":0,"2024":0,"2025":1}}],"toplamSoru":{"2018":5,"2019":5,"2020":6,"2021":6,"2022":5,"2023":4,"2024":5,"2025":5}},
  'YDT İngilizce': {"konular":[{"konu":"Vocabulary","yillar":{"2018":5,"2019":5,"2020":5,"2021":5,"2022":5,"2023":5,"2024":5,"2025":5}},{"konu":"Grammar","yillar":{"2018":10,"2019":10,"2020":10,"2021":10,"2022":10,"2023":10,"2024":10,"2025":10}},{"konu":"Cloze Test","yillar":{"2018":5,"2019":5,"2020":5,"2021":5,"2022":5,"2023":5,"2024":5,"2025":5}},{"konu":"Sentence Completion","yillar":{"2018":8,"2019":8,"2020":8,"2021":8,"2022":8,"2023":8,"2024":8,"2025":8}},{"konu":"Paragraph Comprehension","yillar":{"2018":15,"2019":15,"2020":15,"2021":15,"2022":15,"2023":15,"2024":15,"2025":15}},{"konu":"Dialogue Completion","yillar":{"2018":5,"2019":5,"2020":5,"2021":5,"2022":5,"2023":5,"2024":5,"2025":5}},{"konu":"Restatement","yillar":{"2018":5,"2019":5,"2020":5,"2021":5,"2022":5,"2023":5,"2024":5,"2025":5}},{"konu":"Situation","yillar":{"2018":5,"2019":5,"2020":5,"2021":5,"2022":5,"2023":5,"2024":5,"2025":5}},{"konu":"Paragraph Completion","yillar":{"2018":5,"2019":5,"2020":5,"2021":5,"2022":5,"2023":5,"2024":5,"2025":5}},{"konu":"Translation (Eng. – Tur.)","yillar":{"2018":6,"2019":6,"2020":6,"2021":6,"2022":6,"2023":6,"2024":6,"2025":6}},{"konu":"Translation (Tur. – Eng.)","yillar":{"2018":6,"2019":6,"2020":6,"2021":6,"2022":6,"2023":6,"2024":6,"2025":6}},{"konu":"Irrelevant Sentence","yillar":{"2018":5,"2019":5,"2020":5,"2021":5,"2022":5,"2023":5,"2024":5,"2025":5}}],"toplamSoru":{"2018":80,"2019":80,"2020":80,"2021":80,"2022":80,"2023":80,"2024":80,"2025":80}}
  ,"LGS Türkçe": {
    "konular": [
      {"konu": "Sözcükte Anlam", "yillar": {"2023": 2, "2024": 2, "2025": 2}},
      {"konu": "Cümlede Anlam", "yillar": {"2023": 3, "2024": 3, "2025": 2}},
      {"konu": "Parçada Anlam", "yillar": {"2023": 4, "2024": 3, "2025": 5}},
      {"konu": "Parçada Anlatım", "yillar": {"2023": 3, "2024": 1, "2025": 2}},
      {"konu": "Parçada Yapı", "yillar": {"2023": 1, "2024": 1, "2025": 0}},
      {"konu": "Sözel Mantık", "yillar": {"2023": 1, "2024": 0, "2025": 0}},
      {"konu": "Tablo, Grafik ve Görsel Yorumlama", "yillar": {"2023": 3, "2024": 3, "2025": 3}},
      {"konu": "Yazım Kuralları", "yillar": {"2023": 1, "2024": 1, "2025": 1}},
      {"konu": "Noktalama İşaretleri", "yillar": {"2023": 1, "2024": 1, "2025": 1}},
      {"konu": "Metin Türleri", "yillar": {"2023": 0, "2024": 1, "2025": 0}},
      {"konu": "Söz Sanatları", "yillar": {"2023": 0, "2024": 0, "2025": 1}},
      {"konu": "Fiilimsiler", "yillar": {"2023": 0, "2024": 0, "2025": 1}},
      {"konu": "Cümlenin Öğeleri", "yillar": {"2023": 0, "2024": 0, "2025": 0}},
      {"konu": "Fiilde Çatı", "yillar": {"2023": 0, "2024": 0, "2025": 1}},
      {"konu": "Cümle Türleri", "yillar": {"2023": 0, "2024": 1, "2025": 1}},
      {"konu": "Anlatım Bozuklukları", "yillar": {"2023": 0, "2024": 1, "2025": 1}},
      {"konu": "Deyim ve Atasözleri", "yillar": {"2023": 0, "2024": 1, "2025": 0}}
    ],
    "toplamSoru": {"2023": 20, "2024": 20, "2025": 20}
  },
  "LGS Matematik": {
    "konular": [
      {"konu": "Çarpanlar ve Katlar", "yillar": {"2023": 4, "2024": 1, "2025": 1}},
      {"konu": "Üslü İfadeler", "yillar": {"2023": 3, "2024": 2, "2025": 2}},
      {"konu": "Kareköklü İfadeler", "yillar": {"2023": 5, "2024": 3, "2025": 3}},
      {"konu": "Veri Analizi", "yillar": {"2023": 2, "2024": 1, "2025": 1}},
      {"konu": "Olasılık", "yillar": {"2023": 2, "2024": 1, "2025": 1}},
      {"konu": "Cebirsel İfadeler", "yillar": {"2023": 4, "2024": 2, "2025": 2}},
      {"konu": "Doğrusal Denklemler", "yillar": {"2023": 0, "2024": 3, "2025": 3}},
      {"konu": "Eşitsizlikler", "yillar": {"2023": 0, "2024": 2, "2025": 2}},
      {"konu": "Üçgenler", "yillar": {"2023": 0, "2024": 2, "2025": 2}},
      {"konu": "Eşlik ve Benzerlik", "yillar": {"2023": 0, "2024": 1, "2025": 1}},
      {"konu": "Dönüşüm Geometrisi", "yillar": {"2023": 0, "2024": 1, "2025": 1}},
      {"konu": "Geometrik Cisimler", "yillar": {"2023": 0, "2024": 1, "2025": 1}}
    ],
    "toplamSoru": {"2023": 20, "2024": 20, "2025": 20}
  },
  "LGS Fen Bilimleri": {
    "konular": [
      {"konu": "Mevsimler ve İklim", "yillar": {"2023": 3, "2024": 2, "2025": 1}},
      {"konu": "DNA ve Genetik Kod", "yillar": {"2023": 8, "2024": 4, "2025": 3}},
      {"konu": "Basınç", "yillar": {"2023": 5, "2024": 2, "2025": 2}},
      {"konu": "Madde ve Endüstri", "yillar": {"2023": 4, "2024": 5, "2025": 5}},
      {"konu": "Basit Makineler", "yillar": {"2023": 0, "2024": 2, "2025": 2}},
      {"konu": "Enerji Dönüşümleri ve Çevre Bilimi", "yillar": {"2023": 0, "2024": 3, "2025": 4}},
      {"konu": "Elektrik Yükleri ve Elektrik Enerjisi", "yillar": {"2023": 0, "2024": 2, "2025": 3}}
    ],
    "toplamSoru": {"2023": 20, "2024": 20, "2025": 20}
  },
  "LGS İnkılap Tarihi": {
    "konular": [
      {"konu": "Bir Kahraman Doğuyor", "yillar": {"2023": 3, "2024": 1, "2025": 1}},
      {"konu": "Milli Uyanış: Bağımsızlık Yolunda Atılan Adımlar", "yillar": {"2023": 4, "2024": 2, "2025": 2}},
      {"konu": "Ya İstiklal Ya Ölüm!", "yillar": {"2023": 3, "2024": 2, "2025": 2}},
      {"konu": "Atatürkçülük ve Çağdaşlaşan Türkiye", "yillar": {"2023": 0, "2024": 3, "2025": 3}},
      {"konu": "Demokratikleşme Çabaları", "yillar": {"2023": 0, "2024": 1, "2025": 1}},
      {"konu": "Atatürk Dönemi Türk Dış Politikası", "yillar": {"2023": 0, "2024": 1, "2025": 1}},
      {"konu": "Atatürk'ün Vefatı ve Sonrası", "yillar": {"2023": 0, "2024": 0, "2025": 0}}
    ],
    "toplamSoru": {"2023": 10, "2024": 10, "2025": 10}
  },
  "LGS İngilizce": {
    "konular": [
      {"konu": "Friendship", "yillar": {"2023": 4, "2024": 2, "2025": 2}},
      {"konu": "Teen Life", "yillar": {"2023": 0, "2024": 1, "2025": 1}},
      {"konu": "In The Kitchen", "yillar": {"2023": 2, "2024": 1, "2025": 1}},
      {"konu": "On The Phone", "yillar": {"2023": 2, "2024": 1, "2025": 1}},
      {"konu": "The Internet", "yillar": {"2023": 2, "2024": 1, "2025": 1}},
      {"konu": "Adventures", "yillar": {"2023": 0, "2024": 1, "2025": 1}},
      {"konu": "Tourism", "yillar": {"2023": 0, "2024": 1, "2025": 1}},
      {"konu": "Chores", "yillar": {"2023": 0, "2024": 1, "2025": 1}},
      {"konu": "Science", "yillar": {"2023": 0, "2024": 1, "2025": 1}},
      {"konu": "Natural Forces", "yillar": {"2023": 0, "2024": 0, "2025": 0}}
    ],
    "toplamSoru": {"2023": 10, "2024": 10, "2025": 10}
  },
  "LGS Din Kültürü ve Ahlak Bilgisi": {
    "konular": [
      {"konu": "Kader İnancı", "yillar": {"2023": 4, "2024": 3, "2025": 3}},
      {"konu": "Zekât ve Sadaka", "yillar": {"2023": 3, "2024": 3, "2025": 2}},
      {"konu": "Din ve Hayat", "yillar": {"2023": 3, "2024": 2, "2025": 2}},
      {"konu": "Hz. Muhammed'in Örnekliği", "yillar": {"2023": 0, "2024": 1, "2025": 2}},
      {"konu": "Kur'an-ı Kerim ve Özellikleri", "yillar": {"2023": 0, "2024": 1, "2025": 1}}
    ],
    "toplamSoru": {"2023": 10, "2024": 10, "2025": 10}
  }  
};

const allYears = ['2018', '2019', '2020', '2021', '2022', '2023', '2024', '2025'];
const freeYears = ['2018', '2019', '2020'];
const premiumYears = ['2021', '2022', '2023', '2024', '2025'];

export default function ExamTopicsSection({ user, hasClassViewerSession = false, onUpgrade }: ExamTopicsSectionProps) {
  const { canAccessExamTopics } = useFeatureAccess();
  const [selectedSubject, setSelectedSubject] = useState<string>('AYT Matematik');
  const [searchTerm, setSearchTerm] = useState('');
  const [selectedYears, setSelectedYears] = useState<string[]>(freeYears);
  const [selectedTopic, setSelectedTopic] = useState<string | null>(null);
  const [sortBy, setSortBy] = useState<'name' | 'total'>('total');
  const [sortOrder, setSortOrder] = useState<'asc' | 'desc'>('desc');

  const hasAccess = user || hasClassViewerSession;

  const subjects = Object.keys(examData);
  const currentSubjectData = examData[selectedSubject] || { konular: [], toplamSoru: {} };

  // Filter and sort topics
  const filteredTopics = useMemo(() => {
    const topics = currentSubjectData.konular.filter(topic =>
      topic.konu.toLowerCase().includes(searchTerm.toLowerCase())
    );

    const topicsWithTotals = topics.map(topic => {
      const total = selectedYears.reduce((sum, year) => sum + (topic.yillar[year] || 0), 0);
      return { ...topic, total };
    });

    topicsWithTotals.sort((a, b) => {
      if (sortBy === 'name') {
        return sortOrder === 'asc'
          ? a.konu.localeCompare(b.konu, 'tr')
          : b.konu.localeCompare(a.konu, 'tr');
      } else {
        return sortOrder === 'asc' ? a.total - b.total : b.total - a.total;
      }
    });

    return topicsWithTotals;
  }, [currentSubjectData, searchTerm, selectedYears, sortBy, sortOrder]);

  const totalTopics = filteredTopics.length;
  const totalQuestions = filteredTopics.reduce((sum, topic) => sum + topic.total, 0);

  const toggleYear = (year: string) => {
  const isPremium = premiumYears.includes(year);
  
  if (isPremium && !canAccessExamTopics(year)) {
    onUpgrade();
    return;
  }
  
  if (selectedYears.includes(year)) {
    if (selectedYears.length > 1) {
      setSelectedYears(selectedYears.filter(y => y !== year));
    }
  } else {
    setSelectedYears([...selectedYears, year].sort());
  }
};

  const chartData = selectedTopic
  ? allYears
      .filter(year => canAccessExamTopics(year))
      .map(year => ({
        year,
        soru: currentSubjectData.konular.find(k => k.konu === selectedTopic)?.yillar[year] || 0,
      }))
  : [];

  const handleSort = (field: 'name' | 'total') => {
    if (sortBy === field) {
      setSortOrder(sortOrder === 'asc' ? 'desc' : 'asc');
    } else {
      setSortBy(field);
      setSortOrder('desc');
    }
  };

  return (
    <div id="exam-topics" className="py-12 bg-gray-50">
      <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        {/* Header */}
        <div className="text-center mb-8">
          <h2 className="text-3xl font-bold text-gray-900 mb-2">
            TYT-AYT Çıkmış Konular
          </h2>
          <p className="text-gray-600">
            2018-2025 yılları arasındaki tüm sınav konularını inceleyin
          </p>
        </div>

        {/* Controls */}
        <div className="bg-white rounded-xl shadow-sm p-6 mb-6">
          <div className="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
            {/* Subject Selection */}
            <div>
              <label className="block text-sm font-medium text-gray-700 mb-2">
                <Filter className="inline h-4 w-4 mr-1" />
                Ders Seçimi
              </label>
              <select
                value={selectedSubject}
                onChange={(e) => {
                  setSelectedSubject(e.target.value);
                  setSelectedTopic(null);
                }}
                className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
              >
                {subjects.map(subject => (
                  <option key={subject} value={subject}>{subject}</option>
                ))}
              </select>
            </div>

            {/* Search */}
            <div>
              <label className="block text-sm font-medium text-gray-700 mb-2">
                <Search className="inline h-4 w-4 mr-1" />
                Konu Ara
              </label>
              <input
                type="text"
                value={searchTerm}
                onChange={(e) => setSearchTerm(e.target.value)}
                placeholder="Konu adı yazın..."
                className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
              />
            </div>
          </div>

          {/* Year Filters */}
          <div>
            <label className="block text-sm font-medium text-gray-700 mb-2">
              Yıl Filtreleri
            </label>
            <div className="flex flex-wrap gap-2">
              {allYears.map(year => {
                const isPremium = premiumYears.includes(year);
                const hasYearAccess = canAccessExamTopics(year); // Hook'tan kontrol
                const isLocked = isPremium && !hasYearAccess;
                const isSelected = selectedYears.includes(year);

                return (
                  <button
                    key={year}
                    onClick={() => toggleYear(year)}
                    disabled={isLocked}
                    className={`relative px-4 py-2 rounded-lg font-medium transition-all ${
                      isSelected
                        ? 'bg-blue-600 text-white shadow-md'
                        : isLocked
                        ? 'bg-gray-100 text-gray-400 border-2 border-gray-300 border-dashed cursor-not-allowed opacity-60'
                        : 'bg-gray-100 text-gray-600 hover:bg-gray-200'
                    }`}
                    title={isLocked ? 'Bu yıl için premium paket gereklidir' : ''}
                  >
                    <span className="flex items-center gap-1">
                      {year}
                      {isLocked && <Lock className="h-4 w-4" />}
                    </span>
                    {isPremium && !isLocked && (
                      <span className="absolute -top-1 -right-1 bg-amber-500 text-white text-[10px] px-1.5 py-0.5 rounded-full">
                        PRO
                      </span>
                    )}
                  </button>
                );
              })}
            </div>
            <p className="text-xs text-gray-500 mt-2">
              💎 2021-2025 yılları Gelişmiş ve Profesyonel paketler için 👑 (LGS'de son 3 yıl verisi önemli olduğu için 2023-2025 verileri sunulmaktadır.)
            </p>
          </div>
        </div>

        {/* Stats Cards */}
        <div className="grid grid-cols-1 sm:grid-cols-3 gap-6 mb-6">
          <div className="bg-blue-50 rounded-lg p-6 text-center">
            <div className="text-4xl font-bold text-blue-600 mb-2">{totalTopics}</div>
            <div className="text-gray-700 font-medium">Toplam Konu</div>
          </div>
          <div className="bg-green-50 rounded-lg p-6 text-center">
            <div className="text-4xl font-bold text-green-600 mb-2">{totalQuestions}</div>
            <div className="text-gray-700 font-medium">Toplam Soru</div>
          </div>
          <div className="bg-orange-50 rounded-lg p-6 text-center">
            <div className="text-4xl font-bold text-orange-600 mb-2">{selectedYears.length}</div>
            <div className="text-gray-700 font-medium">Seçili Yıl</div>
          </div>
        </div>

        <div className="grid gap-6 lg:grid-cols-2">
          {/* Topics Table */}
          <div className="bg-white rounded-xl shadow-sm p-6">
            <h3 className="text-lg font-semibold mb-4 flex items-center">
              <BarChart3 className="h-5 w-5 mr-2 text-blue-600" />
              {selectedSubject} Konuları
            </h3>

            <div className="hidden md:block">
              {/* Table Header */}
              <div className="flex items-center text-sm font-medium text-gray-700 border-b pb-2 mb-2">
                <div
                  className="flex-1 cursor-pointer hover:text-blue-600 flex items-center"
                  onClick={() => handleSort('name')}
                >
                  KONU
                  {sortBy === 'name' && (
                    <span className="ml-1">{sortOrder === 'asc' ? '\u2191' : '\u2193'}</span>
                  )}
                </div>
                <div
                  className="w-32 text-center cursor-pointer hover:text-blue-600 flex items-center justify-center"
                  onClick={() => handleSort('total')}
                >
                  TOPLAM SORU
                  {sortBy === 'total' && (
                    <span className="ml-1">{sortOrder === 'asc' ? '\u2191' : '\u2193'}</span>
                  )}
                </div>
                <div className="w-48 text-center">YILLIK DAĞILIM</div>
              </div>

              {/* Table Body */}
              <div className="space-y-1 max-h-96 overflow-y-auto">
                {filteredTopics.map((topic) => (
                  <div
                    key={topic.konu}
                    onClick={() => setSelectedTopic(topic.konu)}
                    className={`flex items-center py-2 px-2 rounded cursor-pointer transition-colors ${
                      selectedTopic === topic.konu
                        ? 'bg-blue-100 border-l-4 border-blue-600'
                        : 'hover:bg-gray-50'
                    }`}
                  >
                    <div className="flex-1 text-sm font-medium text-gray-900">
                      {topic.konu}
                    </div>
                    <div className="w-32 text-center">
                      <span className="inline-block bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-bold">
                        {topic.total}
                      </span>
                    </div>
                    <div className="w-48 flex flex-wrap justify-center gap-1">
                      {selectedYears.map(year => {
                        const count = topic.yillar[year] || 0;
                        return (
                          <div
                            key={year}
                            className={`px-2 py-1 rounded text-xs font-medium ${
                              count > 0
                                ? count >= 4
                                  ? 'bg-green-500 text-white'
                                  : count >= 2
                                  ? 'bg-green-300 text-green-900'
                                  : 'bg-green-100 text-green-800'
                                : 'bg-gray-100 text-gray-400'
                            }`}
                          >
                            {year.slice(2)}: {count}
                          </div>
                        );
                      })}
                    </div>
                  </div>
                ))}
              </div>
            </div>

            {/* Mobile Topic List */}
            <div className="md:hidden space-y-3">
              {filteredTopics.map((topic) => (
                <button
                  key={topic.konu}
                  onClick={() => setSelectedTopic(topic.konu)}
                  className={`w-full text-left bg-gray-50 border border-gray-200 rounded-lg p-4 transition-colors ${
                    selectedTopic === topic.konu ? 'border-blue-500 bg-blue-50' : 'hover:bg-gray-100'
                  }`}
                >
                  <div className="flex flex-col gap-2">
                    <div className="flex items-start justify-between gap-2">
                      <span className="font-semibold text-gray-900">{topic.konu}</span>
                      <span className="inline-block bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-bold">
                        {topic.total}
                      </span>
                    </div>
                    <div className="flex flex-wrap gap-2">
                      {selectedYears.map(year => {
                        const count = topic.yillar[year] || 0;
                        return (
                          <span
                            key={year}
                            className={`px-2 py-1 rounded text-xs font-medium ${
                              count > 0
                                ? count >= 4
                                  ? 'bg-green-500 text-white'
                                  : count >= 2
                                  ? 'bg-green-300 text-green-900'
                                  : 'bg-green-100 text-green-800'
                                : 'bg-gray-100 text-gray-400'
                            }`}
                          >
                            {year.slice(2)}: {count}
                          </span>
                        );
                      })}
                    </div>
                  </div>
                </button>
              ))}
            </div>
          </div>

          {/* Chart */}
          <div className="bg-white rounded-xl shadow-sm p-6">
            <h3 className="text-lg font-semibold mb-4 flex items-center">
              <TrendingUp className="h-5 w-5 mr-2 text-green-600" />
              Konu Seçin
            </h3>
            {selectedTopic ? (
              <div>
                <p className="text-sm text-gray-600 mb-4">
                  <strong>{selectedTopic}</strong> konusunun yıllara göre dağılımı
                </p>
                {chartData.length > 0 ? (
                  <ResponsiveContainer width="100%" height={300}>
                    <BarChart data={chartData}>
                      <CartesianGrid strokeDasharray="3 3" />
                      <XAxis dataKey="year" />
                      <YAxis />
                      <Tooltip />
                      <Bar dataKey="soru" fill="#3B82F6" name="Soru Sayısı" />
                    </BarChart>
                  </ResponsiveContainer>
                ) : (
                  <div className="flex items-center justify-center h-80 text-gray-400">
                    <div className="text-center">
                      <Lock className="h-16 w-16 mx-auto mb-4 opacity-20" />
                      <p>Premium yıllar için giriş yapın</p>
                    </div>
                  </div>
                )}
              </div>
            ) : (
              <div className="flex items-center justify-center h-80 text-gray-400">
                <div className="text-center">
                  <BarChart3 className="h-16 w-16 mx-auto mb-4 opacity-20" />
                  <p>Grafik görmek için bir konu seçin</p>
                </div>
              </div>
            )}
          </div>
        </div>

        {/* Premium CTA */}
        {!hasAccess && (
        <div className="mt-8 bg-gradient-to-br from-blue-50 to-purple-50 rounded-2xl p-8 border-2 border-blue-200">
          <div className="text-center mb-6">
            <Crown className="h-16 w-16 text-blue-600 mx-auto mb-4" />
            <h3 className="text-2xl font-bold text-gray-900 mb-2">
              Tüm Yılları Görmek İster misin?
            </h3>
            <p className="text-gray-600">
              2021-2025 yıllarını görüntülemek ve detaylı analiz yapmak için kayıt olun.
            </p>
          </div>

          <div className="grid gap-6 lg:grid-cols-3 mb-6">
            {/* Temel Paket */}
            <div className="bg-white rounded-xl p-6 border-2 border-gray-200">
              <div className="text-center mb-4">
                <span className="text-2xl">📘</span>
                <h4 className="text-lg font-semibold mt-2">Temel Paket</h4>
              </div>
              <ul className="space-y-2 text-sm text-gray-700">
                <li className="flex items-start">
                  <span className="text-green-500 mr-2">✓</span>
                  2018-2020 yılları
                </li>
                <li className="flex items-start">
                  <span className="text-green-500 mr-2">✓</span>
                  Temel konu analizi
                </li>
                <li className="flex items-start">
                  <span className="text-red-500 mr-2">✗</span>
                  <span className="text-gray-400">2021-2025 yılları</span>
                </li>
              </ul>
            </div>

            {/* Gelişmiş Paket */}
            <div className="bg-gradient-to-br from-purple-100 to-blue-100 rounded-xl p-6 border-2 border-purple-400">
              <div className="text-center mb-4">
                <span className="text-2xl">⭐</span>
                <h4 className="text-lg font-semibold mt-2">Gelişmiş Paket</h4>
                <span className="text-xs bg-purple-200 text-purple-800 px-2 py-1 rounded-full">
                  Önerilen
                </span>
              </div>
              <ul className="space-y-2 text-sm text-gray-900 font-medium">
                <li className="flex items-start">
                  <span className="text-green-600 mr-2">✓</span>
                  2018-2020 yılları
                </li>
                <li className="flex items-start">
                  <span className="text-green-600 mr-2">✓</span>
                  <strong>2021-2025 yılları</strong>
                </li>
                <li className="flex items-start">
                  <span className="text-green-600 mr-2">✓</span>
                  Detaylı trend analizi
                </li>
                <li className="flex items-start">
                  <span className="text-green-600 mr-2">✓</span>
                  AI destekli öneriler
                </li>
              </ul>
            </div>

            {/* Profesyonel Paket */}
            <div className="bg-gradient-to-br from-amber-100 to-orange-100 rounded-xl p-6 border-2 border-amber-400">
              <div className="text-center mb-4">
                <span className="text-2xl">👑</span>
                <h4 className="text-lg font-semibold mt-2">Profesyonel</h4>
              </div>
              <ul className="space-y-2 text-sm text-gray-900 font-medium">
                <li className="flex items-start">
                  <span className="text-green-600 mr-2">✓</span>
                  Tüm yıllar (2018-2025)
                </li>
                <li className="flex items-start">
                  <span className="text-green-600 mr-2">✓</span>
                  Sınırsız analiz
                </li>
                <li className="flex items-start">
                  <span className="text-green-600 mr-2">✓</span>
                  Gelişmiş filtreleme
                </li>
                <li className="flex items-start">
                  <span className="text-green-600 mr-2">✓</span>
                  Öncelikli destek
                </li>
              </ul>
            </div>
          </div>

          <div className="text-center">
            <button
              onClick={onUpgrade}
              className="bg-gradient-to-r from-blue-600 to-purple-600 text-white px-8 py-3 rounded-lg font-semibold hover:from-blue-700 hover:to-purple-700 transition-all transform hover:scale-105 shadow-lg"
            >
              Paketleri İncele
            </button>
          </div>
        </div>
      )}

        {/* How to Use */}
        <div className="mt-12 bg-blue-50 rounded-xl p-6">
          <h3 className="text-lg font-semibold mb-4 flex items-center">
            <Award className="h-5 w-5 mr-2 text-blue-600" />
            Nasıl Kullanılır?
          </h3>
          <div className="grid md:grid-cols-3 gap-4 text-sm text-gray-700">
            <div>
              <strong>• Ders seçin:</strong> Analiz etmek istediğiniz dersi dropdown'dan seçin
            </div>
            <div>
              <strong>• Yıl filtreleri:</strong> Hangi yılları görüntülemek istediğinizi seçin (2021-2025 premium)
            </div>
            <div>
              <strong>• Konu seçimi:</strong> Belirli bir konunun trendini görüntüleyin ve öncelikli çalışın
            </div>
          </div>
        </div>
      </div>

      <FeatureGate
        feature="exam_topics"
        onUpgrade={onUpgrade}
      >
        {/* Chart ve premium içerik */}
        <ResponsiveContainer width="100%" height={300}>
          <BarChart data={chartData}>
            {/* ... */}
          </BarChart>
        </ResponsiveContainer>
      </FeatureGate>
    </div>
  );
}

export { examData };